schema_version: 0.2-draft

required:
  - platform
  - shell
  - io
  - memory
  - macros
  - interconnect
  - mapping
  - search

platform:
  target_pdk: str
  tech_node_nm: int
  clock_period_ns: float

shell:
  command_queue_depth: int
  supports_interrupts: bool
  mmio_addr_width: int
  control_data_width: int

io:
  dma:
    engines: int
    peak_bw_gbps: float
    max_outstanding: int
    addr_width: int
    data_width: int
  axi:
    addr_width: int
    data_width: int
    id_width: int

memory:
  policy:
    prefer_local_sram: bool
    allow_dma_bypass: bool
  instances: list
  # Each list element:
  # - name: str
  # - depth: int
  # - width: int
  # - banks: int
  # - read_latency: int
  # - byte_en: bool
  # - port: str (1r1w)
  # - base_addr: int|hex-str
  # - alignment_bytes: int
  # - attached_macro: str

macros:
  compute_tiles: list
  reduction_units: list
  # compute_tiles[] element:
  # - name: str
  # - count: int
  # - gemm:
  #     mac_type_candidates: list
  #     mac_backend_candidates: list
  #     lanes_candidates: list
  #     accum_width_candidates: list
  #     pipeline_candidates: list
  #     fp16_policy:
  #       semantics_candidates: list
  #       accumulation_candidates: list
  #       rounding: list
  #       subnormals_candidates: list
  #     rtlgen_cpp:
  #       allow_pp_row_feedback: bool
  #       ppg_algorithm_candidates: list
  #       compressor_structure_candidates: list
  #       cpa_structure_candidates: list
  # - vec:
  #     lanes_candidates: list
  #     ops_supported: list
  #     activation_source_candidates: list
  #     fp16_arith_source_candidates: list
  # reduction_units[] element:
  # - name: str
  # - count: int
  # - mode: str

interconnect:
  topology: str
  multicast_support: bool
  links: list
  # links[] element:
  # - name: str
  # - src: str
  # - dst: str
  # - width_bits: int
  # - bandwidth_gbps: float
  # - latency_cycles: int

mapping:
  hierarchy:
    macro_level_partition: bool
    tile_level_schedule: bool
    descriptor_level_emit: bool
  constraints:
    max_tiles_per_op: int
    allow_cross_tile_reduction: bool
    deterministic_ordering: bool

search:
  objectives:
    primary: list
    constraints:
      max_area_um2: float
      max_power_mw: float
      min_tops: float
  derive_to_rtlgen:
    strategy: str
    use_history: bool
    history_db: str
    candidate_budget_per_iter: int
