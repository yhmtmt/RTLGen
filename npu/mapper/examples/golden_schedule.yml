version: 0.1
arch: npu/arch/examples/minimal.yml
buffers:
  - id: A
    addr: 0x00000000
    bytes: 4096
  - id: B
    addr: 0x00001000
    bytes: 4096
  - id: C
    addr: 0x00002000
    bytes: 4096
  - id: D
    addr: 0x00003000
    bytes: 4096
ops:
  - id: dma1
    type: dma_copy
    src: A
    dst: B
    bytes: 4096
  - id: vec1
    type: vec_op
    src: B
    dst: C
    bytes: 256
    op: add
    dtype: int8
  - id: vec2
    type: vec_op
    src: C
    dst: D
    bytes: 256
    op: mul
    dtype: int8
  - id: vec3
    type: vec_op
    src: D
    dst: B
    bytes: 256
    op: relu
    dtype: int8
  - id: gemm1
    type: gemm
    a: B
    b: C
    c: D
    m: 16
    n: 16
    k: 16
    dtype: int8
    layout: row_major
deps:
  - wait: [dma1]
    then: vec1
  - wait: [vec1]
    then: vec2
  - wait: [vec2]
    then: vec3
  - wait: [vec3]
    then: gemm1
events:
  - id: 1
    signal_on: gemm1
    irq: true
